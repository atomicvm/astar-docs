"use strict";(self.webpackChunkdocs_1=self.webpackChunkdocs_1||[]).push([[4459],{3905:function(e,r,n){n.d(r,{Zo:function(){return d},kt:function(){return m}});var t=n(7294);function o(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function a(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?a(Object(n),!0).forEach((function(r){o(e,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function l(e,r){if(null==e)return{};var n,t,o=function(e,r){if(null==e)return{};var n,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||(o[n]=e[n]);return o}(e,r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)n=a[t],r.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=t.createContext({}),u=function(e){var r=t.useContext(i),n=r;return e&&(n="function"==typeof e?e(r):s(s({},r),e)),n},d=function(e){var r=u(e.components);return t.createElement(i.Provider,{value:r},e.children)},p={inlineCode:"code",wrapper:function(e){var r=e.children;return t.createElement(t.Fragment,{},r)}},c=t.forwardRef((function(e,r){var n=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=u(n),m=o,g=c["".concat(i,".").concat(m)]||c[m]||p[m]||a;return n?t.createElement(g,s(s({ref:r},d),{},{components:n})):t.createElement(g,s({ref:r},d))}));function m(e,r){var n=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var a=n.length,s=new Array(a);s[0]=c;var l={};for(var i in r)hasOwnProperty.call(r,i)&&(l[i]=r[i]);l.originalType=e,l.mdxType="string"==typeof e?e:o,s[1]=l;for(var u=2;u<a;u++)s[u]=n[u];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}c.displayName="MDXCreateElement"},2232:function(e,r,n){n.r(r),n.d(r,{assets:function(){return d},contentTitle:function(){return i},default:function(){return m},frontMatter:function(){return l},metadata:function(){return u},toc:function(){return p}});var t=n(7462),o=n(3366),a=(n(7294),n(3905)),s=["components"],l={sidebar_position:5},i="5. Node Monitoring",u={unversionedId:"nodes/ultimateguide/node_monitoring",id:"nodes/ultimateguide/node_monitoring",title:"5. Node Monitoring",description:"Installation of Node Monitoring",source:"@site/docs/nodes/ultimateguide/node_monitoring.md",sourceDirName:"nodes/ultimateguide",slug:"/nodes/ultimateguide/node_monitoring",permalink:"/astar-docs/docs/nodes/ultimateguide/node_monitoring",editUrl:"https://github.com/AstarNetwork/astar-docs/tree/main/docs/nodes/ultimateguide/node_monitoring.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"4. Building Your Collator",permalink:"/astar-docs/docs/nodes/ultimateguide/building_node"},next:{title:"6. Configuration",permalink:"/astar-docs/docs/nodes/ultimateguide/configuration"}},d={},p=[{value:"Installation of Node Monitoring",id:"installation-of-node-monitoring",level:2},{value:"Installation",id:"installation",level:2},{value:"Prometheus",id:"prometheus",level:3},{value:"Node Exporter",id:"node-exporter",level:3},{value:"Process Exporter",id:"process-exporter",level:3},{value:"Alert Manager",id:"alert-manager",level:3},{value:"Grafana",id:"grafana",level:3}],c={toc:p};function m(e){var r=e.components,n=(0,o.Z)(e,s);return(0,a.kt)("wrapper",(0,t.Z)({},c,n,{components:r,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"5-node-monitoring"},"5. Node Monitoring"),(0,a.kt)("h2",{id:"installation-of-node-monitoring"},"Installation of Node Monitoring"),(0,a.kt)("p",null,"In this chapter, we will walk you through the setup of local monitoring for your validator node."),(0,a.kt)("h2",{id:"installation"},"Installation"),(0,a.kt)("p",null,"Make sure you download the latest releases. Please check ",(0,a.kt)("a",{parentName:"p",href:"https://prometheus.io/download/"},"Prometheus"),", ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/ncabatoff/process-exporter/releases"},"Process exporter"),", and ",(0,a.kt)("a",{parentName:"p",href:"https://grafana.com/grafana/download"},"Grafana")," download pages. We will do our best to keep this guide updated but it wouldn't hurt to check if you are installing the latest versions."),(0,a.kt)("p",null,"Installation of these packages goes in 7 steps:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Download"),(0,a.kt)("li",{parentName:"ul"},"Extract"),(0,a.kt)("li",{parentName:"ul"},"Move the files to ",(0,a.kt)("inlineCode",{parentName:"li"},"/usr/lib/bin")),(0,a.kt)("li",{parentName:"ul"},"Create dedicated users"),(0,a.kt)("li",{parentName:"ul"},"Create directories"),(0,a.kt)("li",{parentName:"ul"},"Change the ownership of those directories"),(0,a.kt)("li",{parentName:"ul"},"Cleanup")),(0,a.kt)("h3",{id:"prometheus"},"Prometheus"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"#download files\nwget https://github.com/prometheus/prometheus/releases/download/v2.33.4/prometheus-2.33.4.linux-amd64.tar.gz\n\n#extract\ntar xvf prometheus-*.tar.gz\n\n#move the files to /usr/lib/bin\nsudo cp ./prometheus-2.33.4.linux-amd64/prometheus /usr/local/bin/\nsudo cp ./prometheus-2.33.4.linux-amd64/promtool /usr/local/bin/\nsudo cp -r ./prometheus-2.33.4.linux-amd64/consoles /etc/prometheus\nsudo cp -r ./prometheus-2.33.4.linux-amd64/console_libraries /etc/prometheus\n\n#create dedicated users\nsudo useradd --no-create-home --shell /usr/sbin/nologin prometheus\n\n#create directories\nsudo mkdir /var/lib/prometheus\n\n#change the ownership\nsudo chown prometheus:prometheus /etc/prometheus/ -R\nsudo chown prometheus:prometheus /var/lib/prometheus/ -R\nsudo chown prometheus:prometheus /usr/local/bin/prometheus\nsudo chown prometheus:prometheus /usr/local/bin/promtool\n\n#cleanup\nrm -rf ./prometheus*\n")),(0,a.kt)("h3",{id:"node-exporter"},"Node Exporter"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"#download files\nwget https://github.com/prometheus/node_exporter/releases/download/v1.3.1/node_exporter-1.3.1.linux-amd64.tar.gz\n\n#extract\ntar xvf node_exporter-*.tar.gz\n\n#move the files to /usr/lib/bin\nsudo cp ./node_exporter-1.3.1.linux-amd64/node_exporter /usr/local/bin/\n\n#create dedicated users\nsudo useradd --no-create-home --shell /usr/sbin/nologin node_exporter\n\n#change the ownership\nsudo chown node_exporter:node_exporter /usr/local/bin/node_exporter\n\n#cleanup\nrm -rf ./node_exporter*\n")),(0,a.kt)("h3",{id:"process-exporter"},"Process Exporter"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"#download files\nwget https://github.com/ncabatoff/process-exporter/releases/download/v0.7.10/process-exporter-0.7.10.linux-amd64.tar.gz\n\n#extract\ntar xvf process-exporter-*.tar.gz\n\n#move the files to /usr/lib/bin\nsudo cp ./process-exporter-0.7.10.linux-amd64/process-exporter /usr/local/bin/\n\n#create dedicated users\nsudo useradd --no-create-home --shell /usr/sbin/nologin process-exporter\n\n#create directories\nsudo mkdir /etc/process-exporter\n\n#change the ownership\nsudo chown process-exporter:process-exporter /etc/process-exporter -R\nsudo chown process-exporter:process-exporter /usr/local/bin/process-exporter\n\n#cleanup\nrm -rf ./process-exporter*\n")),(0,a.kt)("h3",{id:"alert-manager"},"Alert Manager"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"#download files\nwget https://github.com/prometheus/alertmanager/releases/download/v0.23.0/alertmanager-0.23.0.linux-amd64.tar.gz\n\n#extract\ntar xvf alertmanager-*.tar.gz\n\n#move the files to /usr/lib/bin\nsudo cp ./alertmanager-0.23.0.linux-amd64/alertmanager /usr/local/bin/\nsudo cp ./alertmanager-0.23.0.linux-amd64/amtool /usr/local/bin/\n\n#create dedicated users\nsudo useradd --no-create-home --shell /usr/sbin/nologin alertmanager\n\n#create directories\nsudo mkdir /etc/alertmanager\nsudo mkdir /var/lib/alertmanager\n\n#change the ownership\nsudo chown alertmanager:alertmanager /etc/alertmanager/ -R\nsudo chown alertmanager:alertmanager /var/lib/alertmanager/ -R\nsudo chown alertmanager:alertmanager /usr/local/bin/alertmanager\nsudo chown alertmanager:alertmanager /usr/local/bin/amtool\n\n#cleanup\nrm -rf ./alertmanager*\n")),(0,a.kt)("h3",{id:"grafana"},"Grafana"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-python"},"sudo apt-get install -y adduser libfontconfig1\nwget https://dl.grafana.com/oss/release/grafana_8.4.2_amd64.deb\nsudo dpkg -i grafana_8.4.2_amd64.deb\n\nsudo grafana-cli plugins install camptocamp-prometheus-alertmanager-datasource\nsudo systemctl restart grafana-server\n\n#cleanup\nrm -rf ./grafana*\n")))}m.isMDXComponent=!0}}]);